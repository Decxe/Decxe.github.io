<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çš‡å¸é€‰ä¸¾æŠ•ç¥¨ç³»ç»Ÿ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#D97706', // ä¸»è‰²è°ƒ-é‡‘è‰²
            secondary: '#10B981', // è¾…åŠ©è‰²-ç»¿è‰²
            accent: '#8B5CF6', // å¼ºè°ƒè‰²-ç´«è‰²
            neutral: '#1F2937', // ä¸­æ€§è‰²-æ·±ç°
            'base-100': '#111827', // èƒŒæ™¯è‰²-æ›´æ·±ç°
            'info': '#3ABFF8',
            'success': '#36D399',
            'warning': '#FBBD23',
            'error': '#F87272',
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .text-shadow-lg {
        text-shadow: 0 4px 8px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.08);
      }
      .backdrop-blur {
        backdrop-filter: blur(8px);
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .voting-card {
        transition: all 0.3s ease;
      }
      .voting-card:hover {
        transform: translateY(-5px);
      }
      .vote-animation {
        animation: pulse 0.5s ease-in-out;
      }
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }
      .rank-up {
        animation: rank-up 1s ease-out;
      }
      @keyframes rank-up {
        0% { color: #36D399; }
        100% { color: inherit; }
      }
      .rank-down {
        animation: rank-down 1s ease-out;
      }
      @keyframes rank-down {
        0% { color: #F87272; }
        100% { color: inherit; }
      }
      .emperor-crown {
        color: #D97706;
        font-size: 1.2em;
      }
      .young-prince-crown {
        color: #8B5CF6;
        font-size: 1em;
      }
      .prince-crown {
        color: #3ABFF8;
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body class="font-inter bg-base-100 text-gray-100 min-h-screen flex flex-col">
  <!-- å¯¼èˆªæ  -->
  <header class="bg-neutral/80 backdrop-blur fixed w-full z-50 transition-all duration-300" id="navbar">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <i class="fa fa-crown text-primary text-2xl"></i>
        <h1 class="text-xl font-bold">çš‡å¸é€‰ä¸¾æŠ•ç¥¨ç³»ç»Ÿ</h1>
      </div>
      
      <nav class="hidden md:flex items-center space-x-6">
        <a href="#voting" class="text-gray-300 hover:text-primary transition-colors">æŠ•ç¥¨</a>
        <a href="#ranking" class="text-gray-300 hover:text-primary transition-colors">æ’å</a>
        <a href="#stats" class="text-gray-300 hover:text-primary transition-colors">ç»Ÿè®¡</a>
        <a href="#about" class="text-gray-300 hover:text-primary transition-colors">å…³äº</a>
      </nav>
      
      <div class="flex items-center space-x-4">
        <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-700 transition-colors">
          <i class="fa fa-moon-o"></i>
        </button>
        <button id="login-button" class="hidden md:block bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-all transform hover:scale-105 flex items-center">
          <i class="fa fa-user mr-2"></i> ç™»å½•
        </button>
        <button id="mobile-menu-button" class="md:hidden p-2 rounded-full hover:bg-gray-700 transition-colors">
          <i class="fa fa-bars"></i>
        </button>
      </div>
    </div>
    
    <!-- ç§»åŠ¨ç«¯èœå• -->
    <div id="mobile-menu" class="md:hidden bg-neutral/95 backdrop-blur hidden">
      <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
        <a href="#voting" class="text-gray-300 hover:text-primary py-2 transition-colors">æŠ•ç¥¨</a>
        <a href="#ranking" class="text-gray-300 hover:text-primary py-2 transition-colors">æ’å</a>
        <a href="#stats" class="text-gray-300 hover:text-primary py-2 transition-colors">ç»Ÿè®¡</a>
        <a href="#about" class="text-gray-300 hover:text-primary py-2 transition-colors">å…³äº</a>
        <button id="mobile-login-button" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-all transform hover:scale-105 flex items-center justify-center">
          <i class="fa fa-user mr-2"></i> ç™»å½•
        </button>
      </div>
    </div>
  </header>

  <!-- ä¸»å†…å®¹ -->
  <main class="flex-grow pt-16">
    <!-- è‹±é›„åŒºåŸŸ -->
    <section class="relative min-h-[60vh] flex items-center justify-center overflow-hidden">
      <div class="absolute inset-0 z-0">
        <img src="https://picsum.photos/seed/palace/1920/1080" alt="èƒŒæ™¯" class="w-full h-full object-cover opacity-20">
        <div class="absolute inset-0 bg-gradient-to-b from-base-100/80 to-base-100"></div>
      </div>
      
      <div class="container mx-auto px-4 z-10 text-center">
        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 leading-tight">
          çš‡å¸<span class="text-primary">é€‰ä¸¾</span>æŠ•ç¥¨ç³»ç»Ÿ
        </h1>
        <p class="text-[clamp(1rem,2vw,1.25rem)] text-gray-300 max-w-2xl mx-auto mb-8">
          ä¸ºæ‚¨å¿ƒç›®ä¸­çš„çš‡å¸ã€å°çš‡å¼Ÿå’Œçš‡å¼ŸæŠ•ç¥¨ï¼Œæ¯å¤©é™æŠ•ä¸€ç¥¨ï¼Œå®æ—¶æŸ¥çœ‹æ’åå˜åŒ–
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <button id="hero-vote-button" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-all transform hover:scale-105 flex items-center justify-center">
            <i class="fa fa-thumbs-up mr-2"></i> ç«‹å³æŠ•ç¥¨
          </button>
          <button class="bg-gray-800 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-all flex items-center justify-center">
            <i class="fa fa-bar-chart mr-2"></i> æŸ¥çœ‹æ’å
          </button>
        </div>
      </div>
    </section>
    
    <!-- æŠ•ç¥¨åŒºåŸŸ -->
    <section id="voting" class="py-16 bg-base-100">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">å€™é€‰äººæŠ•ç¥¨</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">é€‰æ‹©æ‚¨æ”¯æŒçš„å€™é€‰äººæŠ•ç¥¨ï¼Œæ¯äººæ¯å¤©é™æŠ•ä¸€ç¥¨</p>
        </div>
        
        <!-- æŠ•ç¥¨çŠ¶æ€æç¤º -->
        <div id="vote-status" class="mb-8 bg-neutral rounded-xl p-4 flex items-center justify-between">
          <div class="flex items-center">
            <i class="fa fa-info-circle text-primary mr-2"></i>
            <span id="vote-status-text">æ‚¨ä»Šå¤©è¿˜æ²¡æœ‰æŠ•ç¥¨</span>
          </div>
          <div id="vote-reset-timer" class="text-sm text-gray-400">
            æŠ•ç¥¨å°†äº <span id="reset-time">23:59</span> é‡ç½®
          </div>
        </div>
        
        <!-- å€™é€‰äººç½‘æ ¼ -->
        <div id="candidates-grid" class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
          <!-- å€™é€‰äººå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </section>
    
    <!-- æ’ååŒºåŸŸ -->
    <section id="ranking" class="py-16 bg-neutral">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">å½“å‰æ’å</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">æŸ¥çœ‹å€™é€‰äººçš„å®æ—¶æŠ•ç¥¨æ’å</p>
        </div>
        
        <!-- æ’ååˆ—è¡¨ -->
        <div id="ranking-list" class="bg-base-100 rounded-xl overflow-hidden shadow-xl max-w-4xl mx-auto">
          <div class="p-4 border-b border-gray-800 flex items-center justify-between">
            <h3 class="font-semibold flex items-center">
              <i class="fa fa-trophy text-primary mr-2"></i> å€™é€‰äººæ’å
            </h3>
            <div class="flex items-center space-x-2">
              <span class="text-sm text-gray-400">æ’åºæ–¹å¼:</span>
              <select id="sort-select" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary">
                <option value="votes-desc">ç¥¨æ•°ä»é«˜åˆ°ä½</option>
                <option value="votes-asc">ç¥¨æ•°ä»ä½åˆ°é«˜</option>
                <option value="name-asc">å§“åä»Aåˆ°Z</option>
                <option value="name-desc">å§“åä»Zåˆ°A</option>
              </select>
            </div>
          </div>
          
          <div class="p-4">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead>
                  <tr class="text-left text-gray-400">
                    <th class="pb-3 font-medium">æ’å</th>
                    <th class="pb-3 font-medium">å€™é€‰äºº</th>
                    <th class="pb-3 font-medium">ç¥¨æ•°</th>
                    <th class="pb-3 font-medium">è§’è‰²</th>
                    <th class="pb-3 font-medium">è¶‹åŠ¿</th>
                  </tr>
                </thead>
                <tbody id="ranking-body">
                  <!-- æ’åæ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- ç»Ÿè®¡åŒºåŸŸ -->
    <section id="stats" class="py-16 bg-base-100">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">æŠ•ç¥¨ç»Ÿè®¡</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">æŸ¥çœ‹å€™é€‰äººçš„æŠ•ç¥¨åˆ†å¸ƒæƒ…å†µ</p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-5xl mx-auto">
          <!-- å€™é€‰äººæŠ•ç¥¨åˆ†å¸ƒ -->
          <div class="bg-neutral rounded-xl p-6 shadow-lg">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
              <i class="fa fa-pie-chart text-primary mr-2"></i> å€™é€‰äººå¾—ç¥¨åˆ†å¸ƒ
            </h3>
            <div class="h-80">
              <canvas id="candidates-stats-chart"></canvas>
            </div>
          </div>
          
          <!-- æ€»æŠ•ç¥¨æ•° -->
          <div class="bg-neutral rounded-xl p-6 shadow-lg">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
              <i class="fa fa-bar-chart text-primary mr-2"></i> æŠ•ç¥¨æ•°æ®
            </h3>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-base-100 rounded-lg p-4">
                <div class="text-sm text-gray-400 mb-1">æ€»æŠ•ç¥¨æ•°</div>
                <div class="text-3xl font-bold text-white" id="total-votes">0</div>
                <div class="text-xs text-success mt-1">
                  <i class="fa fa-arrow-up"></i> è¾ƒæ˜¨æ—¥ +12.5%
                </div>
              </div>
              
              <div class="bg-base-100 rounded-lg p-4">
                <div class="text-sm text-gray-400 mb-1">ä»Šæ—¥æŠ•ç¥¨</div>
                <div class="text-3xl font-bold text-white" id="today-votes">0</div>
                <div class="text-xs text-success mt-1">
                  <i class="fa fa-arrow-up"></i> è¾ƒæ˜¨æ—¥ +8.3%
                </div>
              </div>
              
              <div class="bg-base-100 rounded-lg p-4">
                <div class="text-sm text-gray-400 mb-1">å‚ä¸ç”¨æˆ·</div>
                <div class="text-3xl font-bold text-white" id="active-users">0</div>
                <div class="text-xs text-success mt-1">
                  <i class="fa fa-arrow-up"></i> è¾ƒæ˜¨æ—¥ +5.2%
                </div>
              </div>
              
              <div class="bg-base-100 rounded-lg p-4">
                <div class="text-sm text-gray-400 mb-1">æŠ•ç¥¨ç‡</div>
                <div class="text-3xl font-bold text-white" id="vote-rate">0%</div>
                <div class="text-xs text-success mt-1">
                  <i class="fa fa-arrow-up"></i> è¾ƒæ˜¨æ—¥ +2.1%
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- å…³äºåŒºåŸŸ -->
    <section id="about" class="py-16 bg-neutral">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">å…³äºç³»ç»Ÿ</h2>
          <p class="text-gray-400 max-w-2xl mx-auto">äº†è§£æ›´å¤šå…³äºçš‡å¸é€‰ä¸¾æŠ•ç¥¨æ’åç³»ç»Ÿçš„ä¿¡æ¯</p>
        </div>
        
        <div class="max-w-3xl mx-auto">
          <div class="bg-base-100 rounded-xl p-6 shadow-lg mb-8">
            <h3 class="text-xl font-semibold mb-4">ç³»ç»Ÿè¯´æ˜</h3>
            <p class="text-gray-300 mb-4">
              çš‡å¸é€‰ä¸¾æŠ•ç¥¨æ’åç³»ç»Ÿæ˜¯ä¸€ä¸ªç”¨äºé€‰ä¸¾çš‡å¸ã€å°çš‡å¼Ÿå’Œçš‡å¼Ÿçš„å¹³å°ã€‚ç”¨æˆ·æ¯å¤©å¯ä»¥æŠ•ä¸€ç¥¨ç»™ä»»æ„å€™é€‰äººï¼Œç³»ç»Ÿä¼šå®æ—¶æ›´æ–°æ’åå¹¶å±•ç¤ºç»“æœã€‚
            </p>
            <p class="text-gray-300">
              é€‰ä¸¾ç»“æŸåï¼Œå¾—ç¥¨æœ€å¤šçš„å€™é€‰äººå°†è¢«å°ä¸ºçš‡å¸ï¼Œç¬¬äºŒåè¢«å°ä¸ºå°çš‡å¼Ÿï¼Œç¬¬ä¸‰åè¢«å°ä¸ºçš‡å¼Ÿã€‚
            </p>
          </div>
          
          <div class="bg-base-100 rounded-xl p-6 shadow-lg">
            <h3 class="text-xl font-semibold mb-4">ä½¿ç”¨è§„åˆ™</h3>
            <ul class="space-y-3 text-gray-300">
              <li class="flex items-start">
                <i class="fa fa-check-circle text-success mt-1 mr-2"></i>
                <span>æ¯ä½ç”¨æˆ·æ¯å¤©åªèƒ½æŠ•ä¸€ç¥¨</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-success mt-1 mr-2"></i>
                <span>æŠ•ç¥¨æ—¶é—´ä¸ºæ¯å¤©00:00è‡³23:59</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-success mt-1 mr-2"></i>
                <span>æŠ•ç¥¨åå¯ä»¥åœ¨æ’åé¡µé¢æŸ¥çœ‹å®æ—¶ç»“æœ</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-success mt-1 mr-2"></i>
                <span>ç³»ç»Ÿä¼šè®°å½•æŠ•ç¥¨å†å²å’Œæ’åå˜åŒ–</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-success mt-1 mr-2"></i>
                <span>ç¦æ­¢ä½¿ç”¨ä»»ä½•è‡ªåŠ¨åŒ–å·¥å…·æˆ–ä½œå¼Šè¡Œä¸º</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- é¡µè„š -->
  <footer class="bg-neutral border-t border-gray-800">
    <div class="container mx-auto px-4 py-12">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- ç³»ç»Ÿä¿¡æ¯ -->
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <i class="fa fa-crown text-primary text-2xl"></i>
            <h2 class="text-xl font-bold">çš‡å¸é€‰ä¸¾æŠ•ç¥¨ç³»ç»Ÿ</h2>
          </div>
          <p class="text-gray-400 mb-4">ä¸ºæ‚¨å–œçˆ±çš„å€™é€‰äººæŠ•ç¥¨ï¼Œå®æ—¶æŸ¥çœ‹æ’åå˜åŒ–ã€‚</p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-twitter"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-facebook"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-instagram"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-github"></i>
            </a>
          </div>
        </div>
        
        <!-- å¿«é€Ÿé“¾æ¥ -->
        <div>
          <h3 class="text-lg font-semibold mb-4">å¿«é€Ÿé“¾æ¥</h3>
          <ul class="space-y-2">
            <li><a href="#voting" class="text-gray-400 hover:text-primary transition-colors">æŠ•ç¥¨</a></li>
            <li><a href="#ranking" class="text-gray-400 hover:text-primary transition-colors">æ’å</a></li>
            <li><a href="#stats" class="text-gray-400 hover:text-primary transition-colors">ç»Ÿè®¡</a></li>
            <li><a href="#about" class="text-gray-400 hover:text-primary transition-colors">å…³äº</a></li>
            <li><a href="#" class="text-gray-400 hover:text-primary transition-colors">å¸®åŠ©ä¸­å¿ƒ</a></li>
          </ul>
        </div>
        
        <!-- æ”¯æŒ -->
        <div>
          <h3 class="text-lg font-semibold mb-4">æ”¯æŒ</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-primary transition-colors">å¸¸è§é—®é¢˜</a></li>
            <li><a href="#" class="text-gray-400 hover:text-primary transition-colors">ä½¿ç”¨æ•™ç¨‹</a></li>
            <li><a href="#" class="text-gray-400 hover:text-primary transition-colors">è”ç³»æˆ‘ä»¬</a></li>
            <li><a href="#" class="text-gray-400 hover:text-primary transition-colors">éšç§æ”¿ç­–</a></li>
            <li><a href="#" class="text-gray-400 hover:text-primary transition-colors">æœåŠ¡æ¡æ¬¾</a></li>
          </ul>
        </div>
        
        <!-- è®¢é˜… -->
        <div>
          <h3 class="text-lg font-semibold mb-4">è®¢é˜…æ›´æ–°</h3>
          <p class="text-gray-400 mb-4">è·å–ç³»ç»Ÿæ›´æ–°å’Œæ´»åŠ¨é€šçŸ¥</p>
          <form class="flex">
            <input type="email" placeholder="æ‚¨çš„é‚®ç®±åœ°å€" class="flex-1 bg-base-100 border border-gray-700 rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
            <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-r-lg transition-colors">
              <i class="fa fa-paper-plane"></i>
            </button>
          </form>
        </div>
      </div>
      
      <div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-gray-500 text-sm">Â© 2025 çš‡å¸é€‰ä¸¾æŠ•ç¥¨ç³»ç»Ÿ. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
        <div class="flex space-x-6 mt-4 md:mt-0">
          <a href="#" class="text-gray-500 hover:text-primary text-sm transition-colors">éšç§æ”¿ç­–</a>
          <a href="#" class="text-gray-500 hover:text-primary text-sm transition-colors">æœåŠ¡æ¡æ¬¾</a>
          <a href="#" class="text-gray-500 hover:text-primary text-sm transition-colors">Cookie æ”¿ç­–</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
      // åˆå§‹åŒ–æ•°æ®
      let candidatesData = [];
      let userVote = null;
      let userVoteTime = null;
      
      // åˆå§‹åŒ–å€™é€‰äººæ•°æ®
      function initCandidatesData() {
        candidatesData = [
          {
            id: 1,
            name: "è®¸å®‡é£",
            votes: 150, // é¢„è®¾çš‡å¸
            role: "çš‡å¸",
            prevRank: null,
            currentRank: null,
            avatar: "https://picsum.photos/seed/xuyufei/200/200",
            crown: "ğŸ‘‘"
          },
          {
            id: 2,
            name: "èµµåšæ´‹",
            votes: 120, // é¢„è®¾å°çš‡å¼Ÿ
            role: "å°çš‡å¼Ÿ",
            prevRank: null,
            currentRank: null,
            avatar: "https://picsum.photos/seed/zhaoboyang/200/200",
            crown: "ğŸ‘‘"
          },
          {
            id: 3,
            name: "é‡‘èƒœåˆ©",
            votes: 90, // é¢„è®¾çš‡å¼Ÿ
            role: "çš‡å¼Ÿ",
            prevRank: null,
            currentRank: null,
            avatar: "https://picsum.photos/seed/jinshengli/200/200",
            crown: "ğŸ‘‘"
          }
        ];
        
        // è®¡ç®—åˆå§‹æ’å
        updateRanking();
      }
      
      // æ›´æ–°æ’å
      function updateRanking() {
        // æŒ‰ç¥¨æ•°é™åºæ’åº
        candidatesData.sort((a, b) => b.votes - a.votes);
        
        // åˆ†é…æ’å
        candidatesData.forEach((candidate, index) => {
          candidate.prevRank = candidate.currentRank;
          candidate.currentRank = index + 1;
          
          // æ ¹æ®æ’åæ›´æ–°è§’è‰²
          if (index === 0) {
            candidate.role = "çš‡å¸";
            candidate.crown = "ğŸ‘‘";
          } else if (index === 1) {
            candidate.role = "å°çš‡å¼Ÿ";
            candidate.crown = "ğŸ‘‘";
          } else if (index === 2) {
            candidate.role = "çš‡å¼Ÿ";
            candidate.crown = "ğŸ‘‘";
          }
        });
      }
      
      // æ¸²æŸ“å€™é€‰äººå¡ç‰‡
      function renderCandidatesGrid() {
        const candidatesGrid = document.getElementById('candidates-grid');
        candidatesGrid.innerHTML = '';
        
        candidatesData.forEach(candidate => {
          const candidateCard = document.createElement('div');
          candidateCard.className = 'voting-card bg-neutral rounded-xl overflow-hidden hover:shadow-lg cursor-pointer';
          
          // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»æŠ•è¿‡ç¥¨
          const hasVoted = userVote === candidate.id;
          
          // ç¡®å®šå¡ç‰‡æ ·å¼
          if (hasVoted) {
            candidateCard.classList.add('border-2', 'border-primary', 'bg-primary/10');
          }
          
          // æ·»åŠ å¤´åƒåŒºåŸŸ
          const avatarContainer = document.createElement('div');
          avatarContainer.className = 'relative h-48';
          
          const avatarImg = document.createElement('img');
          avatarImg.src = candidate.avatar;
          avatarImg.alt = candidate.name;
          avatarImg.className = 'w-full h-full object-cover';
          
          const roleBadge = document.createElement('div');
          roleBadge.className = `absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-medium ${
            candidate.role === "çš‡å¸" ? "bg-yellow-500 text-white" : 
            candidate.role === "å°çš‡å¼Ÿ" ? "bg-purple-500 text-white" : "bg-blue-500 text-white"
          }`;
          roleBadge.textContent = candidate.role;
          
          avatarContainer.appendChild(avatarImg);
          avatarContainer.appendChild(roleBadge);
          
          // æ·»åŠ å€™é€‰äººä¿¡æ¯
          const infoContainer = document.createElement('div');
          infoContainer.className = 'p-5';
          
          const nameRow = document.createElement('div');
          nameRow.className = 'flex items-center justify-between mb-2';
          
          const name = document.createElement('h3');
          name.className = 'text-xl font-bold';
          name.innerHTML = `${candidate.name} ${candidate.crown}`;
          
          const rankBadge = document.createElement('div');
          rankBadge.className = `px-2 py-1 rounded-full text-xs font-medium ${
            candidate.currentRank === 1 ? "bg-yellow-500 text-white" : 
            candidate.currentRank === 2 ? "bg-gray-500 text-white" : "bg-gray-700 text-gray-300"
          }`;
          rankBadge.textContent = `ç¬¬ ${candidate.currentRank} å`;
          
          nameRow.appendChild(name);
          nameRow.appendChild(rankBadge);
          
          const votesCount = document.createElement('div');
          votesCount.className = 'text-sm text-gray-400 mb-4';
          votesCount.textContent = `${candidate.votes} ç¥¨`;
          
          // æ·»åŠ æŠ•ç¥¨æŒ‰é’®
          const voteButton = document.createElement('button');
          voteButton.className = `vote-button w-full py-2 rounded-lg transition-all ${hasVoted ? 'bg-primary text-white' : 'bg-gray-800 hover:bg-gray-700 text-gray-300'}`;
          voteButton.textContent = hasVoted ? 'å·²æŠ•ç¥¨' : 'æŠ•ç¥¨';
          voteButton.disabled = userVote !== null && userVote !== candidate.id;
          
          // æ·»åŠ æŠ•ç¥¨äº‹ä»¶
          voteButton.addEventListener('click', () => {
            if (!voteButton.disabled) {
              handleVote(candidate.id);
            }
          });
          
          // ç»„è£…å¡ç‰‡
          infoContainer.appendChild(nameRow);
          infoContainer.appendChild(votesCount);
          infoContainer.appendChild(voteButton);
          
          candidateCard.appendChild(avatarContainer);
          candidateCard.appendChild(infoContainer);
          
          // æ·»åŠ åˆ°ç½‘æ ¼
          candidatesGrid.appendChild(candidateCard);
        });
      }
      
      // å¤„ç†æŠ•ç¥¨
      function handleVote(candidateId) {
        // å¦‚æœç”¨æˆ·ä»Šå¤©å·²ç»æŠ•ç¥¨ï¼Œå¹¶ä¸”å°è¯•æŠ•ç»™ä¸åŒçš„å€™é€‰äºº
        if (userVote !== null && userVote !== candidateId && !isVoteExpired()) {
          alert('æ‚¨ä»Šå¤©å·²ç»æŠ•è¿‡ç¥¨äº†ï¼Œæ¯å¤©åªèƒ½æŠ•ä¸€ç¥¨');
          return;
        }
        
        // æ›´æ–°æŠ•ç¥¨çŠ¶æ€
        userVote = candidateId;
        userVoteTime = new Date().toISOString();
        
        // æ›´æ–°å€™é€‰äººç¥¨æ•°
        const candidate = candidatesData.find(c => c.id === candidateId);
        if (candidate) {
          candidate.votes += 1;
        }
        
        // æ›´æ–°æ’å
        updateRanking();
        
        // æ›´æ–°UI
        updateVoteStatus();
        renderCandidatesGrid();
        renderRankingList();
        updateStats();
        
        // æ·»åŠ æŠ•ç¥¨åŠ¨ç”»æ•ˆæœ
        const votedCard = document.querySelector(`.voting-card:has(.vote-button:contains('å·²æŠ•ç¥¨'))`);
        if (votedCard) {
          votedCard.classList.add('vote-animation');
          setTimeout(() => {
            votedCard.classList.remove('vote-animation');
          }, 500);
        }
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        saveVoteData();
      }
      
      // æ£€æŸ¥æŠ•ç¥¨æ˜¯å¦è¿‡æœŸ
      function isVoteExpired() {
        if (!userVoteTime) return true;
        
        const voteDate = new Date(userVoteTime);
        const today = new Date();
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€å¤©
        return voteDate.getDate() !== today.getDate() ||
               voteDate.getMonth() !== today.getMonth() ||
               voteDate.getFullYear() !== today.getFullYear();
      }
      
      // æ›´æ–°æŠ•ç¥¨çŠ¶æ€
      function updateVoteStatus() {
        const voteStatusText = document.getElementById('vote-status-text');
        const voteResetTime = document.getElementById('reset-time');
        
        // è®¡ç®—é‡ç½®æ—¶é—´
        const now = new Date();
        const resetTime = new Date(now);
        resetTime.setHours(23, 59, 59, 0);
        
        const hours = resetTime.getHours().toString().padStart(2, '0');
        const minutes = resetTime.getMinutes().toString().padStart(2, '0');
        
        voteResetTime.textContent = `${hours}:${minutes}`;
        
        // æ›´æ–°æŠ•ç¥¨çŠ¶æ€
        if (userVote && !isVoteExpired()) {
          const candidate = candidatesData.find(c => c.id === userVote);
          voteStatusText.innerHTML = `æ‚¨ä»Šå¤©å·²æŠ•ç¥¨ç»™ <span class="text-primary font-medium">${candidate ? candidate.name : userVote}</span> (${candidate ? candidate.role : 'æœªçŸ¥è§’è‰²'})`;
        } else {
          voteStatusText.textContent = 'æ‚¨ä»Šå¤©è¿˜æ²¡æœ‰æŠ•ç¥¨';
        }
      }
      
      // æ¸²æŸ“æ’ååˆ—è¡¨
      function renderRankingList() {
        const rankingBody = document.getElementById('ranking-body');
        rankingBody.innerHTML = '';
        
        // æ ¹æ®æ’åºé€‰é¡¹æ’åº
        const sortSelect = document.getElementById('sort-select');
        const sortValue = sortSelect.value;
        
        let sortedCandidates = [...candidatesData];
        
        switch (sortValue) {
          case 'votes-desc':
            sortedCandidates.sort((a, b) => b.votes - a.votes);
            break;
          case 'votes-asc':
            sortedCandidates.sort((a, b) => a.votes - b.votes);
            break;
          case 'name-asc':
            sortedCandidates.sort((a, b) => a.name.localeCompare(b.name));
            break;
          case 'name-desc':
            sortedCandidates.sort((a, b) => b.name.localeCompare(a.name));
            break;
        }
        
        // æ›´æ–°æ˜¾ç¤ºæ’å
        sortedCandidates.forEach((candidate, index) => {
          candidate.displayRank = index + 1;
        });
        
        // æ¸²æŸ“åˆ—è¡¨
        sortedCandidates.forEach(candidate => {
          const row = document.createElement('tr');
          row.className = 'border-b border-gray-800 hover:bg-gray-800/50 transition-colors';
          
          // æ’åå•å…ƒæ ¼
          const rankCell = document.createElement('td');
          rankCell.className = 'py-3 font-medium';
          
          // æ·»åŠ æ’åå˜åŒ–æŒ‡ç¤º
          let rankChange = '';
          let rankClass = '';
          
          if (candidate.prevRank !== null && candidate.prevRank !== candidate.currentRank) {
            const change = candidate.prevRank - candidate.currentRank;
            
            if (change > 0) {
              rankChange = `<i class="fa fa-arrow-up text-success ml-1"></i>`;
              rankClass = 'rank-up';
            } else if (change < 0) {
              rankChange = `<i class="fa fa-arrow-down text-error ml-1"></i>`;
              rankClass = 'rank-down';
            }
          }
          
          rankCell.innerHTML = `<span class="${rankClass}">${candidate.displayRank}</span>${rankChange}`;
          
          // å€™é€‰äººå•å…ƒæ ¼
          const candidateCell = document.createElement('td');
          candidateCell.className = 'py-3 flex items-center';
          
          const avatarImg = document.createElement('img');
          avatarImg.src = candidate.avatar;
          avatarImg.alt = candidate.name;
          avatarImg.className = 'w-10 h-10 rounded-full mr-3 object-cover';
          
          const nameSpan = document.createElement('span');
          
          // æ ¹æ®è§’è‰²è®¾ç½®ä¸åŒé¢œè‰²
          if (candidate.role === "çš‡å¸") {
            nameSpan.className = 'font-medium text-yellow-400';
          } else if (candidate.role === "å°çš‡å¼Ÿ") {
            nameSpan.className = 'font-medium text-purple-400';
          } else {
            nameSpan.className = 'font-medium text-blue-400';
          }
          
          nameSpan.textContent = candidate.name;
          
          candidateCell.appendChild(avatarImg);
          candidateCell.appendChild(nameSpan);
          
          // ç¥¨æ•°å•å…ƒæ ¼
          const votesCell = document.createElement('td');
          votesCell.className = 'py-3';
          votesCell.textContent = candidate.votes;
          
          // è§’è‰²å•å…ƒæ ¼
          const roleCell = document.createElement('td');
          roleCell.className = 'py-3';
          
          const roleBadge = document.createElement('span');
          roleBadge.className = `px-2 py-1 rounded-full text-xs font-medium ${
            candidate.role === "çš‡å¸" ? "bg-yellow-500 text-white" : 
            candidate.role === "å°çš‡å¼Ÿ" ? "bg-purple-500 text-white" : "bg-blue-500 text-white"
          }`;
          roleBadge.textContent = candidate.role;
          
          roleCell.appendChild(roleBadge);
          
          // è¶‹åŠ¿å•å…ƒæ ¼
          const trendCell = document.createElement('td');
          trendCell.className = 'py-3';
          
          // è®¡ç®—è¶‹åŠ¿
          const trend = calculateTrend(candidate.id);
          
          if (trend > 0) {
            trendCell.innerHTML = `<span class="text-success"><i class="fa fa-arrow-up"></i> ${trend}%</span>`;
          } else if (trend < 0) {
            trendCell.innerHTML = `<span class="text-error"><i class="fa fa-arrow-down"></i> ${Math.abs(trend)}%</span>`;
          } else {
            trendCell.innerHTML = `<span class="text-gray-500"><i class="fa fa-minus"></i> æŒå¹³</span>`;
          }
          
          // ç»„è£…è¡Œ
          row.appendChild(rankCell);
          row.appendChild(candidateCell);
          row.appendChild(votesCell);
          row.appendChild(roleCell);
          row.appendChild(trendCell);
          
          // æ·»åŠ åˆ°è¡¨æ ¼
          rankingBody.appendChild(row);
        });
      }
      
      // è®¡ç®—è¶‹åŠ¿ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
      function calculateTrend(candidateId) {
        // éšæœºç”Ÿæˆ-5%åˆ°5%ä¹‹é—´çš„è¶‹åŠ¿å€¼
        return Math.floor(Math.random() * 11) - 5;
      }
      
      // æ›´æ–°ç»Ÿè®¡æ•°æ®
      function updateStats() {
        // è®¡ç®—æ€»æŠ•ç¥¨æ•°
        const totalVotes = candidatesData.reduce((sum, candidate) => sum + candidate.votes, 0);
        document.getElementById('total-votes').textContent = totalVotes;
        
        // è®¡ç®—ä»Šæ—¥æŠ•ç¥¨æ•°ï¼ˆæ¨¡æ‹Ÿï¼‰
        const todayVotes = Math.floor(totalVotes * 0.3);
        document.getElementById('today-votes').textContent = todayVotes;
        
        // è®¡ç®—å‚ä¸ç”¨æˆ·æ•°ï¼ˆæ¨¡æ‹Ÿï¼‰
        const activeUsers = Math.floor(todayVotes * 0.8);
        document.getElementById('active-users').textContent = activeUsers;
        
        // è®¡ç®—æŠ•ç¥¨ç‡ï¼ˆæ¨¡æ‹Ÿï¼‰
        const voteRate = Math.floor((activeUsers / 1000) * 100);
        document.getElementById('vote-rate').textContent = `${voteRate}%`;
        
        // æ›´æ–°å€™é€‰äººç»Ÿè®¡å›¾è¡¨
        updateCandidatesStatsChart();
      }
      
      // æ›´æ–°å€™é€‰äººç»Ÿè®¡å›¾è¡¨
      function updateCandidatesStatsChart() {
        const ctx = document.getElementById('candidates-stats-chart').getContext('2d');
        
        // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œé”€æ¯å®ƒ
        if (window.candidatesChart) {
          window.candidatesChart.destroy();
        }
        
        // åˆ›å»ºæ–°å›¾è¡¨
        window.candidatesChart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: candidatesData.map(candidate => candidate.name),
            datasets: [{
              label: 'ç¥¨æ•°',
              data: candidatesData.map(candidate => candidate.votes),
              backgroundColor: [
                'rgba(217, 119, 6, 0.7)', // çš‡å¸-é‡‘è‰²
                'rgba(139, 92, 246, 0.7)', // å°çš‡å¼Ÿ-ç´«è‰²
                'rgba(58, 191, 248, 0.7)'  // çš‡å¼Ÿ-è“è‰²
              ],
              borderColor: [
                'rgb(217, 119, 6)',
                'rgb(139, 92, 246)',
                'rgb(58, 191, 248)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom',
                labels: {
                  color: 'rgba(255, 255, 255, 0.7)',
                  padding: 20,
                  usePointStyle: true,
                  pointStyle: 'circle'
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    const label = context.label || '';
                    const value = context.raw || 0;
                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                    const percentage = Math.round((value / total) * 100);
                    return `${label}: ${value} ç¥¨ (${percentage}%)`;
                  }
                }
              }
            },
            cutout: '65%'
          }
        });
      }
      
      // ä¿å­˜æŠ•ç¥¨æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
      function saveVoteData() {
        localStorage.setItem('voteData', JSON.stringify({
          userVote: userVote,
          userVoteTime: userVoteTime,
          candidatesData: candidatesData
        }));
      }
      
      // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æŠ•ç¥¨æ•°æ®
      function loadVoteData() {
        const voteData = localStorage.getItem('voteData');
        
        if (voteData) {
          try {
            const parsedData = JSON.parse(voteData);
            userVote = parsedData.userVote;
            userVoteTime = parsedData.userVoteTime;
            candidatesData = parsedData.candidatesData;
            
            // å¦‚æœæŠ•ç¥¨å·²è¿‡æœŸï¼Œé‡ç½®ç”¨æˆ·æŠ•ç¥¨
            if (isVoteExpired()) {
              userVote = null;
              userVoteTime = null;
            }
            
            // æ›´æ–°æ’å
            updateRanking();
          } catch (e) {
            console.error('Failed to load vote data:', e);
            initCandidatesData();
          }
        } else {
          initCandidatesData();
        }
      }
      
      // åˆå§‹åŒ–
      loadVoteData();
      
      // æ¸²æŸ“åˆå§‹UI
      renderCandidatesGrid();
      renderRankingList();
      updateVoteStatus();
      updateStats();
      
      // è®¾ç½®æ’åºé€‰æ‹©äº‹ä»¶
      const sortSelect = document.getElementById('sort-select');
      sortSelect.addEventListener('change', function() {
        renderRankingList();
      });
      
      // è®¾ç½®ç™»å½•æŒ‰é’®äº‹ä»¶
      const loginButtons = document.querySelectorAll('#login-button, #mobile-login-button, #hero-vote-button');
      loginButtons.forEach(button => {
        button.addEventListener('click', function() {
          alert('ç™»å½•åŠŸèƒ½å°†åœ¨å®é™…éƒ¨ç½²æ—¶å®ç°');
        });
      });
      
      // è®¾ç½®ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
      });
      
      // è®¾ç½®å¹³æ»‘æ»šåŠ¨
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          
          const targetId = this.getAttribute('href');
          const targetElement = document.querySelector(targetId);
          
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop - 80, // è€ƒè™‘å¯¼èˆªæ é«˜åº¦
              behavior: 'smooth'
            });
            
            // å¦‚æœæ˜¯ç§»åŠ¨ç«¯ï¼Œç‚¹å‡»åå…³é—­èœå•
            if (!mobileMenu.classList.contains('hidden')) {
              mobileMenu.classList.add('hidden');
            }
          }
        });
      });
      
      // æ¯éš”ä¸€æ®µæ—¶é—´æ›´æ–°æŠ•ç¥¨çŠ¶æ€
      setInterval(updateVoteStatus, 60000);
    });
  </script>
</body>
</html>  
